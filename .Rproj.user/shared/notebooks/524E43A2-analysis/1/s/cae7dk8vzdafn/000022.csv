"0","rm(list=ls())"
"0","load(""data/sim2-bootstrap.RData"")"
"0","load(""data/sim2-observed.RData"")"
"0","ci_naive <- rbind(apply(D_naive, 2, quantile, c(0.025, 0.975)), ""LM"")"
"0","ci_gps <- rbind(apply(D_gps, 2, quantile, c(0.025, 0.975)), ""SCM(GPS)"")"
"0","ci_ipw <- rbind(apply(D_ipw, 2, quantile, c(0.025, 0.975), na.rm=TRUE), ""IPW-GPS"")"
"0","ci_pf <- rbind(apply(D_pf, 2, quantile, c(0.025, 0.975)), ""SCM(PF)"")"
"0","df <- rbind(t(ci_naive), t(ci_gps), t(ci_ipw), t(ci_pf)) %>%"
"0","  as.data.frame() %>%"
"0","  magrittr::set_colnames(c(""low"", ""high"", ""type"")) %>%"
"0","  mutate(t = rep(ts[2:11], 4),"
"0","         y0 = rep(y0[2:11], 4),"
"0","         d0 = rep(d0, 4),"
"0","         low = as.numeric(low),"
"0","         obs = c(d0_naive, d0_gps, d0_ipw, d0_pf),"
"0","         high = as.numeric(high))"
"0","df %>%"
"0","  ggplot(aes(x=t, y=obs)) +"
"0","  geom_line(aes(x=t, y=d0), colour='red') +"
"0","  geom_ribbon(aes(ymin=low, ymax=high), alpha=0.5) +"
"0","  geom_point() + geom_line() + "
"0","  #ylim(-9, 9) +"
"0","  labs(y=""Estimated Relative DRF"", x=""Treatment"") + "
"0","  facet_wrap(vars(type), scales=""free"")"
